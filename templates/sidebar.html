{% load static %}
<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block text-white sidebar collapse" style="background-color: #001f3f;">
    <div class="position-sticky pt-3">
        <!-- Logo y título -->
        <div class="text-center mb-4">
            <img src="{% static 'img/logo_ofi.png' %}" alt="Logo" style="height: 60px; margin-bottom: 10px;">
            <h5 class="fw-bold">Condominio App</h5>
        </div>
        
        <!-- Búsqueda rápida en versión móvil -->
        <div class="d-md-none px-3 mb-3">
            <input type="text" class="form-control" placeholder="Buscar..." style="border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); background-color: rgba(255,255,255,0.1); color: white;">
        </div>
        
        <!-- Sección principal -->
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-1 mb-1 text-white-50">
            <span>Principal</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link text-white {% if request.path == '/dashboard/' %}active bg-primary{% endif %}" href="{% url 'dashboard' %}">
                    <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/viviendas/' in request.path and not '/viviendas/residentes/' in request.path and not '/viviendas/edificios/' in request.path and not '/viviendas/tipos-residentes/' in request.path %}active bg-primary{% endif %}" href="{% url 'vivienda-list' %}">
                    <i class="fas fa-home me-2"></i> Viviendas
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/viviendas/residentes/' in request.path %}active bg-primary{% endif %}" href="{% url 'residente-list' %}">
                    <i class="fas fa-user-friends me-2"></i> Residentes
                </a>
            </li>
        </ul>
        
        <!-- Sección de control de acceso -->
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-3 mb-1 text-white-50">
            <span>Control de Acceso</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link text-white {% if '/accesos/visitas/' in request.path %}active bg-primary{% endif %}" href="{% url 'visita-list' %}">
                    <i class="fas fa-clipboard-list me-2"></i> Visitas
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/accesos/movimientos/' in request.path %}active bg-primary{% endif %}" href="{% url 'movimiento-list' %}">
                    <i class="fas fa-exchange-alt me-2"></i> Entradas/Salidas
                </a>
            </li>
        </ul>
        
        <!-- Sección de personal (nueva) -->
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-3 mb-1 text-white-50">
            <span>Personal</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link text-white {% if '/personal/empleados/' in request.path %}active bg-primary{% endif %}" href="{% url 'empleado-list' %}">
                    <i class="fas fa-id-badge me-2"></i> Empleados
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/personal/asignaciones/' in request.path %}active bg-primary{% endif %}" href="{% url 'asignacion-list' %}">
                    <i class="fas fa-tasks me-2"></i> Asignaciones
                </a>
            </li>
        </ul>
        
        <!-- Sección de reportes y utilidades -->
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-3 mb-1 text-white-50">
            <span>Reportes y Utilidades</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link text-white {% if '/reportes/' in request.path %}active bg-primary{% endif %}" href="{% url 'reporte-list' %}">
                    <i class="fas fa-chart-bar me-2"></i> Reportes
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/perfil/' in request.path %}active bg-primary{% endif %}" href="{% url 'perfil' %}">
                    <i class="fas fa-user-circle me-2"></i> Mi Perfil
                </a>
            </li>
        </ul>
        
        {% if user.rol.nombre == 'Administrador' %}
        <!-- Sección de administración -->
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-3 mb-1 text-white-50">
            <span>Administración</span>
        </h6>
        <ul class="nav flex-column mb-2">
            <li class="nav-item">
                <a class="nav-link text-white {% if '/usuarios/' in request.path and not '/perfil/' in request.path %}active bg-primary{% endif %}" href="{% url 'usuario-list' %}">
                    <i class="fas fa-users me-2"></i> Usuarios
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/usuarios/roles/' in request.path %}active bg-primary{% endif %}" href="{% url 'rol-list' %}">
                    <i class="fas fa-user-tag me-2"></i> Roles
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/viviendas/edificios/' in request.path %}active bg-primary{% endif %}" href="{% url 'edificio-list' %}">
                    <i class="fas fa-building me-2"></i> Edificios
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/viviendas/tipos-residentes/' in request.path %}active bg-primary{% endif %}" href="{% url 'tipo-residente-list' %}">
                    <i class="fas fa-id-card me-2"></i> Tipos de Residentes
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white {% if '/personal/puestos/' in request.path %}active bg-primary{% endif %}" href="{% url 'puesto-list' %}">
                    <i class="fas fa-briefcase me-2"></i> Puestos de Trabajo
                </a>
            </li>
        </ul>
        {% endif %}
        
        <!-- Versión y ayuda -->
        <div class="px-3 mt-4 mb-2 text-center">
            <div class="small text-white-50">Versión 1.2.0</div>
            <a href="#" class="small text-decoration-none text-white-50 hover-text-white" data-bs-toggle="modal" data-bs-target="#helpModal">Ayuda</a>
        </div>
    </div>
</nav>